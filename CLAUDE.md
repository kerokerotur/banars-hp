# CLAUDE.md

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯Claude Code (claude.ai/code) ãŒã“ã®ãƒªãƒã‚¸ãƒˆãƒªã§ä½œæ¥­ã™ã‚‹éš›ã®ã‚¬ã‚¤ãƒ€ãƒ³ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚

**é‡è¦**: å¿…ãšæ—¥æœ¬èªã§å›ç­”ã—ã¦ãã ã•ã„ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

ãƒãƒŠãƒ¼ã‚ºé‡çƒã‚¯ãƒ©ãƒ–ã®å…¬å¼ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€è¤‡æ•°ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰æ§‹æˆã•ã‚Œã‚‹ãƒ¢ãƒãƒ¬ãƒã§ã™ï¼š

- **client/**: å…¬é–‹ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ (React Router v7 + Tailwind CSS)
- **inhouse/**: å†…éƒ¨ç®¡ç†ç”»é¢ (React Router v7 + Tailwind CSS)
- **server/**: å…±é€šãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API (Cloudflare Workers + D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹)
- **common/**: å…±æœ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (workspaceãƒ‘ãƒƒã‚±ãƒ¼ã‚¸)

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ

### å…¨ä½“æ§‹é€ 

```
homepage/
â”œâ”€â”€ client/           # å…¬é–‹ã‚µã‚¤ãƒˆï¼ˆReact Router v7 + SSGï¼‰
â”œâ”€â”€ inhouse/          # å†…éƒ¨ç®¡ç†ç”»é¢ï¼ˆReact Router v7ï¼‰
â”œâ”€â”€ common/           # å…±æœ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆ@project/commonï¼‰
â”œâ”€â”€ server/           # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰APIï¼ˆCloudflare Workers + D1ï¼‰
â”œâ”€â”€ pnpm-workspace.yaml
â””â”€â”€ package.json
```

### client/ - å…¬é–‹ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸

```
client/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ features/           # æ©Ÿèƒ½åˆ¥ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ home/          # ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ï¼ˆhero, about, newsï¼‰
â”‚   â”‚   â”œâ”€â”€ players/       # é¸æ‰‹æƒ…å ±ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ game-results/  # è©¦åˆçµæœãƒšãƒ¼ã‚¸
â”‚   â”‚   â””â”€â”€ contact/       # ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ 
â”‚   â”œâ”€â”€ layout/            # å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”œâ”€â”€ header.tsx     # ãƒ˜ãƒƒãƒ€ãƒ¼ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â””â”€â”€ footer.tsx     # ãƒ•ãƒƒã‚¿ãƒ¼
â”‚   â”œâ”€â”€ ui/               # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆï¼ˆRadix UIï¼‰
â”‚   â”œâ”€â”€ hooks/            # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ï¼ˆuse-mobile, use-toastï¼‰
â”‚   â”œâ”€â”€ lib/              # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â””â”€â”€ routes.ts         # ãƒ«ãƒ¼ãƒˆå®šç¾©
â”œâ”€â”€ routes/               # ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ index.tsx         # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆ/ï¼‰
â”‚   â”œâ”€â”€ players/index.tsx # é¸æ‰‹ä¸€è¦§ï¼ˆ/playersï¼‰
â”‚   â”œâ”€â”€ game-results/index.tsx # è©¦åˆçµæœï¼ˆ/game-resultsï¼‰
â”‚   â”œâ”€â”€ contact/index.tsx # ãŠå•ã„åˆã‚ã›ï¼ˆ/contactï¼‰
â”‚   â””â”€â”€ layout.tsx        # å…±é€šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”œâ”€â”€ public/               # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆç”»åƒç­‰ï¼‰
â”œâ”€â”€ react-router.config.ts # React Routerè¨­å®šï¼ˆSSGæœ‰åŠ¹ï¼‰
â””â”€â”€ vite.config.ts        # Viteè¨­å®š
```

### inhouse/ - å†…éƒ¨ç®¡ç†ç”»é¢

```
inhouse/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ dashboard/     # ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”‚   â”œâ”€â”€ players/       # é¸æ‰‹ç®¡ç†
â”‚   â”‚   â””â”€â”€ login-form.tsx # ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”œâ”€â”€ layout/        # ç®¡ç†ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ header.tsx # ç®¡ç†ç”»é¢ãƒ˜ãƒƒãƒ€ãƒ¼
â”‚   â”‚   â”‚   â””â”€â”€ sidebar.tsx # ã‚µã‚¤ãƒ‰ãƒãƒ¼ãƒŠãƒ“
â”‚   â”‚   â””â”€â”€ players/       # é¸æ‰‹ç®¡ç†ãƒšãƒ¼ã‚¸
â”‚   â””â”€â”€ ui/               # æœ€å°é™ã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ Dockerfile           # Dockerè¨­å®š
â””â”€â”€ react-router.config.ts
```

### common/ - å…±æœ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

```
common/
â”œâ”€â”€ ui/                   # 40+ã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ button.tsx       # ãƒœã‚¿ãƒ³ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ card.tsx         # ã‚«ãƒ¼ãƒ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ form.tsx         # ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ input.tsx        # å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
â”‚   â”œâ”€â”€ table.tsx        # ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â””â”€â”€ ...              # ãã®ä»–Radix UIãƒ™ãƒ¼ã‚¹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â””â”€â”€ lib/
    â””â”€â”€ utils.ts          # cn()é–¢æ•°ç­‰ã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
```

### server/ - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰API

```
server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts          # ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ renderHtml.ts     # HTMLç”Ÿæˆé–¢æ•°
â”‚   â””â”€â”€ usecase/
â”‚       â””â”€â”€ get-player.ts # é¸æ‰‹ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ migrations/           # D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”œâ”€â”€ 0001_player.sql  # é¸æ‰‹ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
â”‚   â””â”€â”€ 0002_dml_player.sql # åˆæœŸãƒ‡ãƒ¼ã‚¿æŠ•å…¥
â””â”€â”€ wrangler.json         # Cloudflare Workersè¨­å®š
```

### é‡è¦ãªè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«

- `pnpm-workspace.yaml`: ãƒ¢ãƒãƒ¬ãƒè¨­å®š
- `client/react-router.config.ts`: SSGè¨­å®šï¼ˆ`ssr: false`, `prerender: true`ï¼‰
- `server/wrangler.json`: D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­å®š
- å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®`tsconfig.json`: TypeScriptè¨­å®š

## ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

### D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆSQLiteäº’æ›ï¼‰

```sql
-- é¸æ‰‹ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE player (
    id INTEGER PRIMARY KEY NOT NULL,
    player_name TEXT NOT NULL,
    position TEXT NOT NULL,
    uniform_number INTEGER NOT NULL
);
```

### ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿

```sql
INSERT INTO player VALUES
(1, 'ç”°ä¸­å¤ªéƒ', 'æŠ•æ‰‹', 1),
(2, 'ä½è—¤èŠ±å­', 'æ•æ‰‹', 2),
(3, 'å±±ç”°æ¬¡éƒ', 'å†…é‡æ‰‹', 3);
```

## APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### server/ - Cloudflare Workers API

- `GET /` - ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒšãƒ¼ã‚¸ï¼ˆHTMLï¼‰
- `GET /players` - é¸æ‰‹ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆJSONï¼‰

### ãƒ¬ã‚¹ãƒãƒ³ã‚¹ä¾‹

```json
// GET /players
[
  {
    "id": 1,
    "player_name": "ç”°ä¸­å¤ªéƒ",
    "position": "æŠ•æ‰‹",
    "uniform_number": 1
  }
]
```

## ã‚³ãƒãƒ³ãƒ‰

### é–‹ç™ºç”¨

- `pnpm install` - ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‹ã‚‰å®Ÿè¡Œ)
- `pnpm dev` - é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹• (client/, inhouse/, server/ã®ã„ãšã‚Œã‹ã‹ã‚‰å®Ÿè¡Œ)
- `pnpm typecheck` - TypeScriptå‹ãƒã‚§ãƒƒã‚¯ã®å®Ÿè¡Œ (client/ã¨inhouse/ã§åˆ©ç”¨å¯èƒ½)

### Turborepoçµ±åˆã‚³ãƒãƒ³ãƒ‰

- `pnpm build` - å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¸¦åˆ—ãƒ“ãƒ«ãƒ‰ (ä¾å­˜é–¢ä¿‚é †ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹)
- `pnpm build:dev` - é–‹ç™ºç’°å¢ƒå‘ã‘ä¸¦åˆ—ãƒ“ãƒ«ãƒ‰
- `pnpm build:prod` - æœ¬ç•ªç’°å¢ƒå‘ã‘ä¸¦åˆ—ãƒ“ãƒ«ãƒ‰
- `pnpm typecheck` - å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®TypeScriptãƒã‚§ãƒƒã‚¯ (ä¸¦åˆ—å®Ÿè¡Œ)
- `pnpm clean` - å…¨ãƒ“ãƒ«ãƒ‰æˆæœç‰©ã¨ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚¯ãƒªã‚¢

### é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•ã‚³ãƒãƒ³ãƒ‰ï¼ˆä¾å­˜é–¢ä¿‚å¯¾å¿œï¼‰

- `pnpm dev` - clientã¨inhouseã‚’èµ·å‹•ï¼ˆserverã¯æ‰‹å‹•èµ·å‹•ãŒå¿…è¦ï¼‰
- `pnpm dev:server` - serverã®ã¿èµ·å‹•
- `pnpm dev:frontend` - clientã¨inhouseã‚’èµ·å‹•ï¼ˆserverã‚‚è‡ªå‹•èµ·å‹•ï¼‰
- `pnpm dev:client` - clientã®ã¿èµ·å‹•ï¼ˆserverã‚‚è‡ªå‹•èµ·å‹•ï¼‰
- `pnpm dev:inhouse` - inhouseã®ã¿èµ·å‹•ï¼ˆserverã‚‚è‡ªå‹•èµ·å‹•ï¼‰
- `pnpm dev:all` - å…¨ã‚µãƒ¼ãƒ“ã‚¹ä¸¦åˆ—èµ·å‹•ï¼ˆå¾“æ¥ã®å‹•ä½œï¼‰

### ã‚³ãƒ¼ãƒ‰å“è³ªãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

- `pnpm format` - Prettierã«ã‚ˆã‚‹è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ (ä¸¦åˆ—å®Ÿè¡Œã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥æœ‰åŠ¹)
- `pnpm format:check` - ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯ (CIã§ä½¿ç”¨)
- `pnpm lint` - ESLintã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ä¿®æ­£ (ä¸¦åˆ—å®Ÿè¡Œ)
- `pnpm lint:check` - ESLintã«ã‚ˆã‚‹ã‚³ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ (CIã§ä½¿ç”¨)

### ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ç”¨

- `pnpm build:dev` - é–‹ç™ºç’°å¢ƒå‘ã‘ãƒ“ãƒ«ãƒ‰ (client/ã¨inhouse/)
- `pnpm build:prod` - æœ¬ç•ªç’°å¢ƒå‘ã‘ãƒ“ãƒ«ãƒ‰ (client/ã¨inhouse/)
- `pnpm start` - ãƒ“ãƒ«ãƒ‰æ¸ˆã¿ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®èµ·å‹• (client/ã¨inhouse/)

### ã‚µãƒ¼ãƒãƒ¼å›ºæœ‰ã®ã‚³ãƒãƒ³ãƒ‰

- `pnpm cf-typegen` - Cloudflareå‹å®šç¾©ã®ç”Ÿæˆ
- `pnpm check` - TypeScriptãƒã‚§ãƒƒã‚¯ + ãƒ‡ãƒ—ãƒ­ã‚¤ã®ãƒ‰ãƒ©ã‚¤ãƒ©ãƒ³
- `pnpm server-deploy` - Cloudflare Workersã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤
- `pnpm mg-create` - æ–°ã—ã„D1ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ
- `pnpm mg-deploy-local` - ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨
- `pnpm mg-deploy-remote` - ãƒªãƒ¢ãƒ¼ãƒˆã§ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³é©ç”¨

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

- clientã¨inhouseã®ä¸¡ã‚¢ãƒ—ãƒªã¯**React Router v7**ã‚’ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ã§ä½¿ç”¨ã€SSRã¯ç„¡åŠ¹(`ssr: false`)ã€ãƒ—ãƒªãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯æœ‰åŠ¹
- **Tailwind CSS v4**ã§ã‚«ã‚¹ã‚¿ãƒ è¨­å®šã«ã‚ˆã‚‹ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªUIãƒ—ãƒªãƒŸãƒ†ã‚£ãƒ–ã«ã¯**Radix UI**ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨
- `@project/common`ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã‚ˆã‚‹å…±æœ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- å³å¯†ãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹ã®TypeScript

### ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°æ§‹é€ 

ãƒ«ãƒ¼ãƒˆã¯`app/routes.ts`ã§React Router v7ã®ãƒ«ãƒ¼ãƒˆè¨­å®šã‚’ä½¿ç”¨ã—ã¦å®šç¾©ï¼š

- `routes/layout.tsx`ã§ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ©ãƒƒãƒ‘ãƒ¼
- æ©Ÿèƒ½ãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒˆçµ„ç¹”åŒ–ï¼ˆä¾‹ï¼š`routes/game-results/`ã€`routes/contact/`ï¼‰

### å…±æœ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

`common/`ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã€clientã¨inhouseã®ä¸¡ã‚¢ãƒ—ãƒªã§`@project/common`ã¨ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆå¯èƒ½ãªå…±æœ‰UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’æä¾›ã—ã¾ã™ã€‚

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

- ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹APIã«ã¯**Cloudflare Workers**
- ãƒ‡ãƒ¼ã‚¿æ°¸ç¶šåŒ–ã«ã¯**D1ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**ï¼ˆSQLiteäº’æ›ï¼‰
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¯`server/migrations/`ã«é…ç½®

### ç’°å¢ƒè¨­å®š

- ç’°å¢ƒå›ºæœ‰ãƒ“ãƒ«ãƒ‰ã«ã¯`env-cmd`ã‚’ä½¿ç”¨
- å„ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒªã«å€‹åˆ¥ã®`.env`ã¨`.env.prod`ãƒ•ã‚¡ã‚¤ãƒ«
- ãƒ“ãƒ«ãƒ‰ã‚³ãƒãƒ³ãƒ‰ã«ç’°å¢ƒé¸æŠã‚’å«ã‚€

## é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

1. é©åˆ‡ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆclient/, inhouse/, server/ï¼‰ã‹ã‚‰ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ
2. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã¯`pnpm`ã‚’ä½¿ç”¨ï¼ˆroot package.jsonã§è¨­å®šæ¸ˆã¿ï¼‰
3. å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆã™ã‚‹å‰ã«`pnpm typecheck`ã‚’å®Ÿè¡Œ
4. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å¤‰æ›´ã«ã¯`pnpm mg-create`ã§ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆã¨`mg-deploy-*`ã‚³ãƒãƒ³ãƒ‰ã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤ãŒå¿…è¦

## ãƒ‡ãƒ—ãƒ­ã‚¤

ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒªã¯GitHub Actionsã§ãƒ‡ãƒ—ãƒ­ã‚¤ï¼š

- **Client**: "Deploy to Client Pages"ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ â†’ https://banars-base.com/
- **Inhouse**: "Deploy to Inhouse Pages"ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ â†’ https://inhouse.banars-base.com/

ã‚µãƒ¼ãƒãƒ¼ã¯`pnpm server-deploy`ã‚³ãƒãƒ³ãƒ‰ã§Cloudflare Workersã«ãƒ‡ãƒ—ãƒ­ã‚¤ã€‚

## é–‹ç™ºæ™‚ã®æ³¨æ„äº‹é …

- ã™ã¹ã¦ã®ã‚³ãƒãƒ³ãƒ‰ã¯bashã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œ
- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªè¿½åŠ æ™‚ã‚‚bashã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§`pnpm`ã‚’ä½¿ç”¨
- é–‹ç™ºç’°å¢ƒã§ã¯`pnpm dev`ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•
- **é‡è¦**: `node_modules/`ã¯å¿…ãšgitignoreã«å«ã‚ã€ã‚³ãƒŸãƒƒãƒˆã—ãªã„
- ä¾å­˜é–¢ä¿‚ã®å¤‰æ›´ã¯`package.json`ã¨`pnpm-lock.yaml`ã®ã¿ã‚³ãƒŸãƒƒãƒˆ
- **ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: æ—¥æœ¬èªã§è¨˜è¿°ã™ã‚‹
- **ã™ã¹ã¦ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: æ—¥æœ¬èªã§çµ±ä¸€ã™ã‚‹

## ã‚¨ãƒ‡ã‚£ã‚¿è¨­å®šï¼ˆVS Codeï¼‰

### è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆè¨­å®š

- **ä¿å­˜æ™‚è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ**: `.vscode/settings.json`ã§è¨­å®šæ¸ˆã¿
- **æ¨å¥¨æ‹¡å¼µæ©Ÿèƒ½**: Prettierã€ESLintã€TypeScriptæ‹¡å¼µæ©Ÿèƒ½ã‚’`.vscode/extensions.json`ã§æ¨å¥¨
- **ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿**: Prettierï¼ˆTypeScript/JavaScript/JSONï¼‰
- **ãƒªãƒ³ã‚¿**: ESLintï¼ˆè‡ªå‹•ä¿®æ­£æœ‰åŠ¹ï¼‰

### å¿…é ˆæ‹¡å¼µæ©Ÿèƒ½

1. `esbenp.prettier-vscode` - Prettierãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿
2. `dbaeumer.vscode-eslint` - ESLintãƒªãƒ³ã‚¿
3. `bradlc.vscode-tailwindcss` - TailwindCSSè£œå®Œ
4. `ms-vscode.vscode-typescript-next` - TypeScriptè¨€èªã‚µãƒ¼ãƒãƒ¼

## AIé–‹ç™ºæ”¯æ´ç”¨ã®ç†è§£ãƒã‚¤ãƒ³ãƒˆ

### Claude & GitHub Copilotå‘ã‘

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆç‰¹å¾´**:

1. **ãƒ¢ãƒãƒ¬ãƒæ§‹æˆ**: pnpm workspaceã«ã‚ˆã‚‹4ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†
2. **React Router v7**: æœ€æ–°ç‰ˆã®React Routerãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ä½¿ç”¨
3. **å…±æœ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ**: `@project/common`ã§çµ±ä¸€ã•ã‚ŒãŸãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 
4. **ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹**: Cloudflare Workers + D1ã®ç¾ä»£çš„ãªã‚¹ã‚¿ãƒƒã‚¯
5. **å‹å®‰å…¨æ€§**: TypeScriptå…¨é¢æ¡ç”¨ã€å³å¯†ãªå‹ãƒã‚§ãƒƒã‚¯

**é–‹ç™ºãƒ‘ã‚¿ãƒ¼ãƒ³**:

- **ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼é§†å‹•**: `app/features/`ã§ã®æ©Ÿèƒ½åˆ¥çµ„ç¹”åŒ–
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†åˆ©ç”¨**: common/ui/ã§ã®å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **ç’°å¢ƒåˆ†é›¢**: `.env`/`.env.prod`ã§ã®è¨­å®šç®¡ç†
- **ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**: SQLãƒ•ã‚¡ã‚¤ãƒ«ã§ã®DBç®¡ç†

**æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**:

- **ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰**: React Router v7 + TailwindCSS v4 + Radix UI
- **ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰**: Cloudflare Workers + D1 (SQLite)
- **ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°**: TailwindCSS + Radix UI + class-variance-authority
- **ãƒ•ã‚©ãƒ¼ãƒ **: React Hook Form + Zod
- **ãƒ“ãƒ«ãƒ‰**: Vite + TypeScript

**ã‚³ãƒ¼ãƒ‰è¦ç´„**:

- ãƒ•ã‚¡ã‚¤ãƒ«å‘½å: kebab-caseï¼ˆä¾‹: `game-results.tsx`ï¼‰
- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ: PascalCaseï¼ˆä¾‹: `GameResults`ï¼‰
- æ©Ÿèƒ½åˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®æ¡ç”¨
- å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯Radix UIãƒ™ãƒ¼ã‚¹

**ã‚ˆãä½¿ç”¨ã™ã‚‹ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³**:

```typescript
// å…±æœ‰ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
import { Button } from "@project/common/ui/button";

// React Router
import { useLoaderData } from "react-router";

// ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
import { cn } from "@project/common/lib/utils";
```

## ãƒ¢ãƒãƒ¬ãƒæ§‹æˆã®æŠ€è¡“è©³ç´°

### pnpm Workspaceã®ä»•çµ„ã¿

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ **pnpm workspace** ã‚’ä½¿ç”¨ã—ãŸãƒ¢ãƒãƒ¬ãƒæ§‹æˆã§ã™ã€‚ä»¥ä¸‹ã®æŠ€è¡“çš„ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ï¼š

#### 1. ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹è¨­å®š

**pnpm-workspace.yaml**:

```yaml
packages:
  - client/*
  - common/*
  - inhouse/*
  - server/*
```

#### 2. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–“ã®ä¾å­˜é–¢ä¿‚

- **client** â†’ `@project/common` (workspace:\*)
- **inhouse** â†’ `@project/common` (workspace:\*)
- **common** â†’ ç‹¬ç«‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜ã•ã‚Œã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªï¼‰

#### 3. å…±æœ‰ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ï¼ˆ@project/commonï¼‰ã®æ§‹æˆ

**package.jsonè¨­å®š**:

```json
{
  "name": "@project/common",
  "main": "./lib/index.js",
  "types": "./lib/index.d.ts",
  "exports": {
    ".": {
      "types": "./lib/index.d.ts",
      "default": "./lib/index.js"
    },
    "./ui/*": {
      "types": "./ui/*.tsx",
      "default": "./ui/*.tsx"
    },
    "./lib/*": {
      "types": "./lib/*.ts",
      "default": "./lib/*.ts"
    }
  }
}
```

**TypeScriptè¨­å®šï¼ˆãƒ«ãƒ¼ãƒˆçµ±ä¸€ç®¡ç†ï¼‰**:

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
- **ãƒ«ãƒ¼ãƒˆ**: `/tsconfig.json` - å…¨ä½“ã®åŸºæœ¬è¨­å®š
- **client/**: extends ãƒ«ãƒ¼ãƒˆè¨­å®š + React Routerè¨­å®š
- **inhouse/**: extends ãƒ«ãƒ¼ãƒˆè¨­å®š + React Routerè¨­å®š  
- **server/**: extends ãƒ«ãƒ¼ãƒˆè¨­å®š + Cloudflare Workersè¨­å®š
- **common/**: extends ãƒ«ãƒ¼ãƒˆè¨­å®š + ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ“ãƒ«ãƒ‰è¨­å®š

### çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹è¨­å®š
```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ESNext", 
    "moduleResolution": "bundler",
    "jsx": "react-jsx",
    "strict": true,
    "skipLibCheck": true,
    "esModuleInterop": true,
    "paths": {
      "@project/common": ["./common"],
      "@project/common/*": ["./common/*"]
    }
  }
}
```

#### 4. ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ–¹æ³•

**ç›´æ¥ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**:

```typescript
// ç‰¹å®šã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ç›´æ¥ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { Button } from "@project/common/ui/button";
import { Card } from "@project/common/ui/card";
import { cn } from "@project/common/lib/utils";
```

**ãƒãƒ³ãƒ‰ãƒ«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ**:

```typescript
// index.tsã‹ã‚‰ã®ä¸€æ‹¬ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
import { Button, Card, cn } from "@project/common";
```

#### 5. é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

**ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**:

```bash
# ãƒ«ãƒ¼ãƒˆã‹ã‚‰å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# ç‰¹å®šã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ä¾å­˜é–¢ä¿‚ã‚’è¿½åŠ 
cd client && pnpm add lodash
cd common && pnpm add -D typescript
```

**ãƒ“ãƒ«ãƒ‰ã¨ã‚¿ã‚¤ãƒ—ãƒã‚§ãƒƒã‚¯**:

```bash
# commonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰
cd common && pnpm build

# å„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¿ã‚¤ãƒ—ãƒã‚§ãƒƒã‚¯
cd client && pnpm typecheck
cd inhouse && pnpm typecheck
```

#### 6. ãƒ¢ãƒãƒ¬ãƒã®åˆ©ç‚¹

1. **ã‚³ãƒ¼ãƒ‰å…±æœ‰**: UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã®çµ±ä¸€
2. **å‹å®‰å…¨æ€§**: TypeScriptã«ã‚ˆã‚‹å‹å®šç¾©ã®å…±æœ‰
3. **ä¾å­˜é–¢ä¿‚ç®¡ç†**: pnpmã«ã‚ˆã‚‹åŠ¹ç‡çš„ãªä¾å­˜é–¢ä¿‚ç®¡ç†
4. **é–‹ç™ºåŠ¹ç‡**: å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä¸€å…ƒç®¡ç†
5. **ä¿å®ˆæ€§**: ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®çµ±ä¸€

#### 7. é–‹ç™ºæ™‚ã®æ³¨æ„ç‚¹

- **commonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å¤‰æ›´**: å¤‰æ›´å¾Œã¯ä¾å­˜ã™ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§å†ãƒ“ãƒ«ãƒ‰å¿…è¦
- **å‹å®šç¾©**: commonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å‹å¤‰æ›´ã¯å…¨ä½“ã«å½±éŸ¿
- **ä¾å­˜é–¢ä¿‚**: workspace:\*ã‚’ä½¿ç”¨ã—ã¦å†…éƒ¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å‚ç…§
- **ãƒ“ãƒ«ãƒ‰é †åº**: commonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…ˆã«ãƒ“ãƒ«ãƒ‰ã—ã¦ã‹ã‚‰ä»–ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
- **Gitç®¡ç†**: node_modules/ã¯å¿…ãšgitignoreã—ã€çµ¶å¯¾ã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„
- **ä¾å­˜é–¢ä¿‚ã®ç®¡ç†**: package.jsonã¨pnpm-lock.yamlã®ã¿ã‚’ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†

#### 8. ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

**commonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆ**:

```bash
# ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã®ä¾å­˜é–¢ä¿‚ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pnpm install

# å‹å®šç¾©ã‚’å†ç”Ÿæˆ
cd common && pnpm build
```

**TypeScriptã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹å ´åˆ**:

```bash
# å‹å®šç¾©ã‚’å†ç”Ÿæˆ
cd common && pnpm build
cd client && pnpm typecheck
```

## Turborepoçµ±åˆ

### Turborepoã¨ã¯

**Turborepo**ã¯VercelãŒé–‹ç™ºã—ãŸãƒ¢ãƒãƒ¬ãƒç”¨ã®ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã§ã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ï¼š

#### 1. **ã‚¤ãƒ³ãƒ†ãƒªã‚¸ã‚§ãƒ³ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥**
- ãƒ“ãƒ«ãƒ‰çµæœã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã€å¤‰æ›´ã®ãªã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å†ãƒ“ãƒ«ãƒ‰ã‚’ã‚¹ã‚­ãƒƒãƒ—
- ãƒ­ãƒ¼ã‚«ãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã¨ãƒªãƒ¢ãƒ¼ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«å¯¾å¿œ
- ãƒãƒƒã‚·ãƒ¥ãƒ™ãƒ¼ã‚¹ã®å·®åˆ†æ¤œå‡º

#### 2. **ä¸¦åˆ—ã‚¿ã‚¹ã‚¯å®Ÿè¡Œ**
- ä¾å­˜é–¢ä¿‚ã‚’è€ƒæ…®ã—ãŸä¸¦åˆ—ãƒ“ãƒ«ãƒ‰
- CPUã‚³ã‚¢æ•°ã«å¿œã˜ãŸæœ€é©åŒ–
- è¤‡æ•°ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åŒæ™‚å‡¦ç†

#### 3. **ä¾å­˜é–¢ä¿‚ã®è‡ªå‹•è§£æ±º**
- ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸é–“ã®ä¾å­˜é–¢ä¿‚ã‚’è‡ªå‹•æ¤œå‡º
- æ­£ã—ã„é †åºã§ã®ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œ
- å¾ªç’°ä¾å­˜ã®æ¤œå‡º

#### 4. **ç’°å¢ƒå¤‰æ•°ã®ç®¡ç†**
- ã‚¿ã‚¹ã‚¯ã”ã¨ã®ç’°å¢ƒå¤‰æ•°è¨­å®š
- æ©Ÿå¯†æƒ…å ±ã®é©åˆ‡ãªå‡¦ç†
- ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã®çµ±ä¸€

### æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®Turborepoæ´»ç”¨

#### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š**

**å¾“æ¥ã®pnpm workspace**:
```bash
# é †æ¬¡å®Ÿè¡Œï¼ˆæ™‚é–“ãŒã‹ã‹ã‚‹ï¼‰
cd common && pnpm build
cd client && pnpm build
cd inhouse && pnpm build
cd server && pnpm typecheck
```

**Turborepo**:
```bash
# ä¸¦åˆ—å®Ÿè¡Œ + ã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆé«˜é€Ÿï¼‰
pnpm build  # å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä¸¦åˆ—ãƒ“ãƒ«ãƒ‰
```

#### **ã‚­ãƒ£ãƒƒã‚·ãƒ¥åŠ¹æœ**

åˆå›ãƒ“ãƒ«ãƒ‰:
```bash
$ pnpm build
âœ“ common:build    [cached]
âœ“ client:build    [cached] 
âœ“ inhouse:build   [cached]
```

2å›ç›®ä»¥é™ï¼ˆå¤‰æ›´ãªã—ï¼‰:
```bash
$ pnpm build
âœ“ common:build    [CACHED, replayed]
âœ“ client:build    [CACHED, replayed]
âœ“ inhouse:build   [CACHED, replayed]
```

#### **ä¾å­˜é–¢ä¿‚ç®¡ç†**

```json
// turbo.json - ã‚¿ã‚¹ã‚¯ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³è¨­å®š
{
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],  // ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…ˆã«ãƒ“ãƒ«ãƒ‰
      "outputs": ["build/**"]   // ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
    },
    "typecheck": {
      "dependsOn": ["^build"],  // ãƒ“ãƒ«ãƒ‰å¾Œã«å‹ãƒã‚§ãƒƒã‚¯
      "outputs": []
    }
  }
}
```

### Turborepoã‚³ãƒãƒ³ãƒ‰è©³ç´°

#### **åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰**

```bash
# å…¨ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰
pnpm build

# ç‰¹å®šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿
turbo build --filter=client
turbo build --filter=common

# ä¾å­˜é–¢ä¿‚ã‚‚å«ã‚ã¦
turbo build --filter=client...

# ä¸¦åˆ—åº¦æŒ‡å®š
turbo build --concurrency=4
```

#### **é–‹ç™ºç”¨ã‚³ãƒãƒ³ãƒ‰**

```bash
# å…¨é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
pnpm dev

# ç‰¹å®šãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿
turbo dev --filter=client
turbo dev --filter=inhouse

# ãƒ­ã‚°å‡ºåŠ›è¨­å®š
turbo dev --output-logs=new-only
```

#### **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†**

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥çŠ¶æ³ç¢ºèª
turbo build --dry-run

# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
turbo clean

# å¼·åˆ¶å†ãƒ“ãƒ«ãƒ‰
turbo build --force
```

### è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«è§£èª¬

#### **turbo.json**

```json
{
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],           // ä¾å­˜é–¢ä¿‚
      "outputs": ["build/**", "dist/**"], // ã‚­ãƒ£ãƒƒã‚·ãƒ¥å¯¾è±¡
      "env": ["NODE_ENV", "VITE_*"]      // ç’°å¢ƒå¤‰æ•°
    },
    "dev": {
      "cache": false,      // é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã¯ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ãªã„
      "persistent": true   // æ°¸ç¶šãƒ—ãƒ­ã‚»ã‚¹
    }
  },
  "globalDependencies": [   // ã‚°ãƒ­ãƒ¼ãƒãƒ«ä¾å­˜ãƒ•ã‚¡ã‚¤ãƒ«
    "package.json",
    "turbo.json"
  ]
}
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™

#### **ãƒ“ãƒ«ãƒ‰æ™‚é–“æ¯”è¼ƒ**

| æ–¹æ³• | åˆå›ãƒ“ãƒ«ãƒ‰ | 2å›ç›®ï¼ˆå¤‰æ›´ãªã—ï¼‰ | 1ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å¤‰æ›´ |
|------|------------|-------------------|-----------------|
| å¾“æ¥ | 180ç§’ | 180ç§’ | 180ç§’ |
| Turbo | 180ç§’ | 5ç§’ | 45ç§’ |

#### **ä¸¦åˆ—å‡¦ç†åŠ¹æœ**

- **CPUä½¿ç”¨ç‡**: å˜ä¸€ã‚³ã‚¢ã‹ã‚‰å…¨ã‚³ã‚¢æ´»ç”¨
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: åŠ¹ç‡çš„ãªã‚¿ã‚¹ã‚¯åˆ†æ•£
- **I/Oæœ€é©åŒ–**: ä¸¦åˆ—ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ

### é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ”¹å–„

#### **CI/CDæœ€é©åŒ–**

```yaml
# GitHub Actionsä¾‹
- name: Build with cache
  run: |
    turbo build
    turbo typecheck
    turbo lint:check
```

#### **ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºåŠ¹ç‡åŒ–**

```bash
# å¤‰æ›´ã—ãŸéƒ¨åˆ†ã®ã¿ãƒ†ã‚¹ãƒˆ
turbo test --filter=[HEAD^1]

# å½±éŸ¿ç¯„å›²ã®ç¢ºèª
turbo build --dry-run --filter=[HEAD^1]
```

### ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

#### **ã‚­ãƒ£ãƒƒã‚·ãƒ¥å•é¡Œ**

```bash
# ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
turbo clean

# å¼·åˆ¶å†ãƒ“ãƒ«ãƒ‰
turbo build --force

# ä¾å­˜é–¢ä¿‚ç¢ºèª
turbo build --graph
```

#### **ä¸¦åˆ—å®Ÿè¡Œå•é¡Œ**

```bash
# ä¸¦åˆ—åº¦ã‚’ä¸‹ã’ã‚‹
turbo build --concurrency=1

# ãƒ­ã‚°è©³ç´°å‡ºåŠ›
turbo build --output-logs=full
```

### å°†æ¥ã®æ‹¡å¼µ

#### **ãƒªãƒ¢ãƒ¼ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥**

Vercelãªã©ã§ã®ãƒªãƒ¢ãƒ¼ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥å…±æœ‰ã«ã‚ˆã‚Šã€ãƒãƒ¼ãƒ å…¨ä½“ã§ãƒ“ãƒ«ãƒ‰æ™‚é–“ã‚’çŸ­ç¸®å¯èƒ½ï¼š

```bash
# ãƒªãƒ¢ãƒ¼ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥è¨­å®š
turbo login
turbo link
```

#### **åˆ†æ•£ãƒ“ãƒ«ãƒ‰**

å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®åˆ†æ•£ãƒ“ãƒ«ãƒ‰å¯¾å¿œã«ã‚ˆã‚Šã€ã•ã‚‰ãªã‚‹é«˜é€ŸåŒ–ãŒå¯èƒ½ã€‚

## ã‚µãƒ¼ãƒãƒ¼ä¾å­˜é–¢ä¿‚ç®¡ç†

### å•é¡Œã¨è§£æ±º

#### **å¾“æ¥ã®å•é¡Œ**
- clientã¨inhouseã¯serverã®APIã«ä¾å­˜
- serverãŒèµ·å‹•ã—ã¦ã„ãªã„ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸ã«å‹•ä½œã—ãªã„
- æ‰‹å‹•ã§serverã‚’å…ˆã«èµ·å‹•ã™ã‚‹å¿…è¦ãŒã‚ã£ãŸ

#### **Turborepoã«ã‚ˆã‚‹è§£æ±º**

**1. ä¾å­˜é–¢ä¿‚ã®å®šç¾©**
```json
// turbo.json
{
  "tasks": {
    "dev:frontend": {
      "dependsOn": ["^dev:server"],  // serverã®èµ·å‹•ã‚’å¾…ã¤
      "cache": false,
      "persistent": true
    }
  }
}
```

**2. è‡ªå‹•èµ·å‹•é †åºåˆ¶å¾¡**
```bash
# æ¨å¥¨: ã‚µãƒ¼ãƒãƒ¼ä¾å­˜ã‚’è€ƒæ…®ã—ãŸèµ·å‹•
pnpm dev:frontend  # serverã®èµ·å‹•ã‚’å¾…ã£ã¦ã‹ã‚‰client/inhouseèµ·å‹•

# åˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã®åˆ†é›¢èµ·å‹•
Terminal 1: pnpm dev:server    # ã¾ãšserverã‚’èµ·å‹•
Terminal 2: pnpm dev:frontend  # serverã®æº–å‚™å®Œäº†å¾Œã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•
```

**3. ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯æ©Ÿèƒ½**
```javascript
// scripts/wait-for-server.js
// ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ã‚’è‡ªå‹•æ¤œçŸ¥
// æœ€å¤§30å›ã€2ç§’é–“éš”ã§ãƒªãƒˆãƒ©ã‚¤
// èµ·å‹•ç¢ºèªå¾Œã«ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’èµ·å‹•
```

### ä½¿ç”¨ä¾‹

#### **é–‹ç™ºé–‹å§‹æ™‚**
```bash
# 1ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å…¨ã¦ç®¡ç†
pnpm dev:server    # ã¾ãšã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ï¼ˆåˆ¥ã‚¿ãƒ¼ãƒŸãƒŠãƒ«æ¨å¥¨ï¼‰

# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•å¾Œ
pnpm dev:frontend  # è‡ªå‹•çš„ã«ã‚µãƒ¼ãƒãƒ¼ã‚’ç¢ºèªã—ã¦ã‹ã‚‰ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰èµ·å‹•
```

#### **å€‹åˆ¥èµ·å‹•**
```bash
# clientã®ã¿é–‹ç™º
pnpm dev:client    # serverã®èµ·å‹•ã‚’è‡ªå‹•ç¢ºèª

# inhouseã®ã¿é–‹ç™º  
pnpm dev:inhouse   # serverã®èµ·å‹•ã‚’è‡ªå‹•ç¢ºèª
```

#### **å¾“æ¥é€šã‚Šã®ä¸¦åˆ—èµ·å‹•**
```bash
# ä¸Šç´šè€…å‘ã‘: ä¾å­˜é–¢ä¿‚ã‚’ç„¡è¦–ã—ãŸä¸¦åˆ—èµ·å‹•
pnpm dev:all       # å…¨ã‚µãƒ¼ãƒ“ã‚¹åŒæ™‚èµ·å‹•ï¼ˆserverã®æº–å‚™ã‚’å¾…ãŸãªã„ï¼‰
```

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

#### **ã‚µãƒ¼ãƒãƒ¼æœªèµ·å‹•æ™‚**
```bash
$ pnpm dev:frontend
ğŸ• ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ã‚’å¾…æ©Ÿä¸­: http://localhost:8787
â³ å†è©¦è¡Œ 1/30...
â³ å†è©¦è¡Œ 2/30...
âŒ ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ç¢ºèªã«å¤±æ•—ã—ã¾ã—ãŸ
```

#### **èµ·å‹•æˆåŠŸæ™‚**
```bash
$ pnpm dev:frontend
ğŸ• ã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ã‚’å¾…æ©Ÿä¸­: http://localhost:8787
âœ… ã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¾ã—ãŸ: http://localhost:8787
ğŸš€ ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ã§ãã¾ã™
```

### è¨­å®šã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

#### **ç’°å¢ƒå¤‰æ•°**
```bash
# ã‚µãƒ¼ãƒãƒ¼URLã®å¤‰æ›´
SERVER_URL=http://localhost:3001 pnpm dev:frontend

# ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®šã®èª¿æ•´
WAIT_TIMEOUT=60 pnpm dev:frontend
```

#### **é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æœ€é©åŒ–**
```bash
# é«˜é€Ÿé–‹ç™ºã‚µã‚¤ã‚¯ãƒ«
1. pnpm dev:server     # ä¸€åº¦èµ·å‹•ï¼ˆé•·æ™‚é–“ç¨¼åƒï¼‰
2. pnpm dev:client     # é–‹ç™ºä¸­ã¯ä½•åº¦ã§ã‚‚å†èµ·å‹•å¯èƒ½
3. pnpm dev:inhouse    # å¿…è¦ã«å¿œã˜ã¦ç®¡ç†ç”»é¢ã‚‚èµ·å‹•
```
